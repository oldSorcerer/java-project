
### –ú–µ–Ω–µ–¥–∂–µ—Ä –†–µ—Å—É—Ä—Å–æ–≤: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –í–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π üåå

–í—ã ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –≤—Å–µ–ª–µ–Ω—Å–∫–æ–≥–æ "–ú–µ–Ω–µ–¥–∂–µ—Ä–∞ –†–µ—Å—É—Ä—Å–æ–≤" –¥–ª—è –æ–≥—Ä–æ–º–Ω–æ–π –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä—ã. –≠—Ç–æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤ —Å–≤–æ—ë–º —Ä–æ–¥–µ, –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ –∏ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –ª–∏—à—å –æ–¥–Ω–∞–∂–¥—ã. –í—Å–µ –∏–≥—Ä–æ–∫–∏, –∂–µ–ª–∞—é—â–∏–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã–º —Ä–µ—Å—É—Ä—Å–∞–º, –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∏–º–µ–Ω–Ω–æ –∫ –Ω–µ–º—É. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —Ç—ã—Å—è—á–∏ –∏–≥—Ä–æ–∫–æ–≤ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑. –í–∞–º –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–∂–µ –ø—Ä–∏ —Ç–∞–∫–æ–º –Ω–∞–ø–ª—ã–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ª–∏—à—å –æ–¥–∏–Ω-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä, –∏ –≤—Å–µ –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç —Å—Å—ã–ª–∫—É –∏–º–µ–Ω–Ω–æ –Ω–∞ –Ω–µ–≥–æ, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å GameResourceManager, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ instance —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º volatile, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω—ë–º –±—ã–ª–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ—Ç–æ–∫–∞–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ. –°–æ–∑–¥–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ getManager(), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞. –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–º–Ω—É—é "–¥–≤–æ–π–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É" (double-checked locking) –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞, –∏ –ø—É—Å—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä GameResourceManager —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ getManager(). –í–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫. –í –∫–æ–Ω—Ü–µ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–∞ –ø–æ—Ç–æ–∫–∞ –ø–æ–ª—É—á–∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞, —Å—Ä–∞–≤–Ω–∏–≤ –∏—Ö –∏ –≤—ã–≤–µ–¥—è true –Ω–∞ —ç–∫—Ä–∞–Ω, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –≤—Å–µ–ª–µ–Ω—Å–∫–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –ü–æ–ª–µ instance –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ private static volatile, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—Å–µ–º –ø–æ—Ç–æ–∫–∞–º.
2. –ú–µ—Ç–æ–¥ getManager() –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω double-checked locking: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å instance –Ω–∞ null –≤–Ω–µ synchronized-–±–ª–æ–∫–∞, –∑–∞—Ç–µ–º –≤–Ω—É—Ç—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å instance –Ω–∞ null –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞.
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é synchronized-–±–ª–æ–∫–∞ –ø–æ –∫–ª–∞—Å—Å—É GameResourceManager.
4. –ö–ª–∞—Å—Å GameResourceManager –¥–æ–ª–∂–µ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤, –æ–±—Ä–∞—â–∞—é—â–∏—Ö—Å—è –∫ getManager().
5. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ GameResourceManager –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.
6. –í –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª—É—á–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä GameResourceManager —á–µ—Ä–µ–∑ getManager().
7. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç–æ–∫–æ–≤ —Å—Å—ã–ª–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–º –ø–æ—Ç–æ–∫–æ–º, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ä–∞–≤–Ω–∏–º—ã —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ==, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω –Ω–∞ —ç–∫—Ä–∞–Ω (true), –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.